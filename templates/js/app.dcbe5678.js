(function(){"use strict";var e={5579:function(e,t,a){var n=a(9242),o=a(3396);function r(e,t,a,n,r,l){const i=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(i)}var l={name:"App",components:{}},i=a(89);const s=(0,i.Z)(l,[["render",r]]);var d=s,u=a(2026),c=a(1957),f=a(2483),p=a(7139);const m={class:"container"},h=(0,o._)("h1",null,"Создание графа знаний",-1),g=(0,o._)("h3",null,"Заполните таблицу",-1),v={class:"input-group"},y=(0,o._)("span",{class:"input-group-text"},"Факт, характеристика и значения фактов",-1),w=(0,o._)("p",null,null,-1),b=(0,o._)("div",null,[(0,o._)("p")],-1),k={class:"form-floating"},_=(0,o._)("label",{for:"floatingTextarea2"},"Значение факта 1",-1),x={class:"form-floating"},O=(0,o._)("label",{for:"floatingTextarea2"},"Значение факта 2",-1),S=(0,o._)("h3",null,"Данные",-1),U=(0,o._)("p",null,null,-1);function j(e,t,a,r,l,i){const s=(0,o.up)("b-alert"),d=(0,o.up)("b-button"),u=(0,o.up)("b-form-input"),c=(0,o.up)("b-form-textarea"),f=(0,o.up)("v-edge-label"),j=(0,o.up)("v-network-graph");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(n.W3,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(s,{show:"",variant:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,p.zw)(l.warning_text),1)])),_:1},512),[[n.F8,l.show]])])),_:1}),(0,o._)("div",m,[h,(0,o._)("div",null,[g,(0,o._)("div",v,[y,(0,o.wy)((0,o._)("input",{type:"text","aria-label":"First name",class:"form-control","data-toggle":"tooltip","data-placement":"top",title:"Введите имя факта","onUpdate:modelValue":t[0]||(t[0]=e=>l.infotemp.fakt=e)},null,512),[[n.nr,l.infotemp.fakt]]),(0,o.wy)((0,o._)("input",{type:"text","aria-label":"Last name",class:"form-control","data-toggle":"tooltip","data-placement":"top",title:"Введите описание значения","onUpdate:modelValue":t[1]||(t[1]=e=>l.infotemp.descr=e)},null,512),[[n.nr,l.infotemp.descr]]),(0,o.wy)((0,o._)("input",{type:"text","aria-label":"Last name",class:"form-control","data-toggle":"tooltip","data-placement":"top",title:"Введите значения фактов через ';'","onUpdate:modelValue":t[2]||(t[2]=e=>l.infotemp.infofakt=e)},null,512),[[n.nr,l.infotemp.infofakt]])]),w,""!==l.infotemp.fakt&&""!==l.infotemp.faktinfo?((0,o.wg)(),(0,o.j4)(d,{key:0,variant:"btn btn-success",onClick:i.save},{default:(0,o.w5)((()=>[(0,o.Uk)("Сохранить")])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(d,{key:1,variant:"btn btn-success",onClick:i.save,disabled:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Сохранить")])),_:1},8,["onClick"]))]),b,(0,o._)("div",null,[(0,o.Wm)(u,{modelValue:l.temp.f1,"onUpdate:modelValue":t[3]||(t[3]=e=>l.temp.f1=e),placeholder:"Факт 1"},null,8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(u,{modelValue:l.temp.r,"onUpdate:modelValue":t[4]||(t[4]=e=>l.temp.r=e),placeholder:"Напишите тип отношения"},null,8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(u,{modelValue:l.temp.f2,"onUpdate:modelValue":t[5]||(t[5]=e=>l.temp.f2=e),placeholder:"Факт 2"},null,8,["modelValue"])]),(0,o._)("div",k,[(0,o.wy)((0,o._)("textarea",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>l.temp.val1=e),placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[n.nr,l.temp.val1]]),_]),(0,o._)("div",x,[(0,o.wy)((0,o._)("textarea",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>l.temp.val2=e),placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[n.nr,l.temp.val2]]),O]),S,(0,o.Wm)(c,{id:"textarea",modelValue:l.textArray,"onUpdate:modelValue":t[8]||(t[8]=e=>l.textArray=e),placeholder:"",rows:"3","max-rows":"6",readonly:""},null,8,["modelValue"]),U,""!==l.temp.f1&&""!==l.temp.r&&""!==l.temp.f2&&""!==l.temp.info1&&""!==l.temp.info2?((0,o.wg)(),(0,o.j4)(d,{key:0,onClick:i.addText,variant:"btn btn-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Добавить отношение")])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(d,{key:1,onClick:i.addText,variant:"btn btn-primary",disabled:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Добавить отношение")])),_:1},8,["onClick"])),""!==l.textArray?((0,o.wg)(),(0,o.j4)(d,{key:2,variant:"btn btn-warning",onClick:i.sendData},{default:(0,o.w5)((()=>[(0,o.Uk)("Создать граф")])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(d,{key:3,variant:"btn btn-warning",disabled:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Создать граф")])),_:1})),""!==l.textArray?((0,o.wg)(),(0,o.j4)(d,{key:4,variant:"btn btn-danger",onClick:i.clearAll},{default:(0,o.w5)((()=>[(0,o.Uk)("Очистить")])),_:1},8,["onClick"])):((0,o.wg)(),(0,o.j4)(d,{key:5,variant:"btn btn-danger",disabled:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Очистить")])),_:1})),(0,o.Wm)(d,{variant:"btn btn-info",onClick:i.savefile},{default:(0,o.w5)((()=>[(0,o.Uk)("Сохранить отчет")])),_:1},8,["onClick"])]),(0,o.wy)((0,o._)("div",null,[(0,o.Wm)(j,{class:"graph",nodes:l.nodes,edges:l.edges,layouts:l.layouts},{"edge-label":(0,o.w5)((({edge:e,...t})=>[(0,o.Wm)(f,(0,o.dG)({text:e.label,align:"center","vertical-align":"above"},t),null,16,["text"])])),_:1},8,["nodes","edges","layouts"])],512),[[n.F8,l.ready]])],64)}a(7658);var V=a(6265),C=a.n(V);const T=()=>"/";function A(){const e=C().create({baseURL:T()});return e}var $=A(),N={name:"MainView",title:"Observer",components:{},data(){return{fact_array:[],infotemp:{fakt:"",descr:"",infofakt:""},temp:{f1:"",r:"",f2:"",val1:"",val2:""},array:[],textArray:"",show:!1,warning_text:"",nodes:{node1:{name:"Node 1"},node2:{name:"Node 2"},node3:{name:"Node 3"},node4:{name:"Node 4"}},edges:{edge1:{source:"node1",target:"node2"},edge2:{source:"node2",target:"node3"},edge3:{source:"node3",target:"node4"}},layouts:{nodes:{node1:{x:0,y:0},node2:{x:50,y:50},node3:{x:100,y:0},node4:{x:150,y:50}}},kout:0,ready:!1}},methods:{closeAlert(){this.show=!1,this.warning_text=""},clearFields(){this.temp.f1="",this.temp.r="",this.temp.f2="",this.temp.info1="",this.temp.info2=""},addText(){if(this.temp.f1===this.temp.f2)return this.warning_text="Петли не допустимы!",this.show=!0,this.clearFields(),void setTimeout(this.closeAlert,2e3);var e={...this.temp};this.array.push(e),this.kout+=1,this.textArray+=`Правило ${this.kout}  ${this.temp.f1},${this.temp.r},${this.temp.f2},${this.temp.val1},${this.temp.val2}\n`,this.clearFields(),1!==this.temp.check||(this.temp.f2+="last")},async sendData(){try{const e=await $.post("api/makegraph",{data:this.array});200===e.status&&(localStorage.setItem("nodes",JSON.stringify(e.data.response.nodes)),localStorage.setItem("edges",JSON.stringify(e.data.response.edges)),localStorage.setItem("layouts",JSON.stringify(e.data.response.layouts)),this.router.push("/GraphView"))}catch(e){this.warning_text="Ошибка отправки запроса!",this.show=!0,setTimeout(this.closeAlert,2e3)}finally{this.nodes=JSON.parse(localStorage.getItem("nodes")),this.edges=JSON.parse(localStorage.getItem("edges")),this.layouts=JSON.parse(localStorage.getItem("layouts")),this.ready=!0}},clearAll(){this.array=[],this.clearFields(),this.textArray=""},save(){let e={...this.infotemp};e.infofakt=this.parse_string(e.infofakt),this.fact_array.push(e),this.clear_fact()},clear_fact(){this.infotemp.fakt="",this.infotemp.descr="",this.infotemp.infofakt=""},parse_string(e){var t=[];for(var a of e.split(";"))t.push(a);return t},reformatToString(e){let t="";for(let a of e)t=t+`??(${a.fakt})=`+a.descr+"\n",t=t+`==(${a.fakt})=`+a.infofakt.join(", ")+"\n",t+="\n";return t},download(e,t,a){var n=new Blob([e],{type:a});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var o=document.createElement("a"),r=URL.createObjectURL(n);o.href=r,o.download=t,document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(r)}),0)}},savefile(){if(0===this.fact_array.length)return this.warning_text="Отсутствуют факты!",this.show=!0,void setTimeout(this.closeAlert,2e3);let e=this.createRule(this.array)+this.reformatToString(this.fact_array);this.download(e,"Отчёт.txt","text/plain")},createRule(e){let t=1,a="";for(let n of e)a+=`Правило ${t}:\nЕСЛИ\n${n.f1}=${n.val1}\n${n.r}\n${n.f2}=${n.val2}\nТО\n\n`,t+=1;return a}}};const W=(0,i.Z)(N,[["render",j]]);var I=W;function J(e,t,a,n,r,l){const i=(0,o.up)("v-network-graph");return(0,o.wg)(),(0,o.j4)(i,{class:"graph",nodes:r.nodes,edges:r.edges,layouts:r.layouts},null,8,["nodes","edges","layouts"])}var L={name:"GraphView",data(){return{nodes:null,edges:null,layouts:null}},mounted(){this.nodes=JSON.parse(localStorage.getItem("nodes")),this.edges=JSON.parse(localStorage.getItem("edges")),this.layouts=JSON.parse(localStorage.getItem("layouts"))}};const F=(0,i.Z)(L,[["render",J]]);var P=F;const R=[{path:"/",component:I},{path:"/graph",component:P}],Z=(0,f.p7)({history:(0,f.PO)("/"),routes:R});var M=Z;const B=(0,n.ri)(d);B.use(u.ZP).use(c.ZP).use(M).mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var i=!0,s=0;s<n.length;s++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(i=!1,r<l&&(l=r));if(i){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,l=n[0],i=n[1],s=n[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(s)var u=s(a)}for(t&&t(n);d<l.length;d++)r=l[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self["webpackChunkuntitled"]=self["webpackChunkuntitled"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(5579)}));n=a.O(n)})();
//# sourceMappingURL=app.dcbe5678.js.map